@page "{id}"
@using Backend.Html
@model PostModel
@{
    ViewData["Title"] = $"{Model.Post?.Title ?? "Not found"}";
    ViewData["Description"] = $"{Model.Post?.Summary ?? "This post does not exists"}";
}

@if (Model.Post is null)
{
    <h1>404 - Post not found</h1>
    <p>
        You have not found what you where looking for.<br />
        Maybe my most viewed post could interest you.
        <!-- todo: implement most recent or most viewed posts -->
    </p>
}
else 
{
    <aside>
        <h2>Related posts:</h2>
        @foreach (var relatedPost in @Model.Post.RelatedPosts)
        {
            <div class="related-post-entry">
                <h3><a asp-page="Post" asp-route-id="@relatedPost.UrlIdentifier">@relatedPost.Title</a></h3>
            </div>
        }
    </aside>
    <h1>@Model.Post!.Title</h1>
    <section class="tag-section">
        @foreach (var tag in @Model.Post!.Tags)
        {
            <div class="tag">@tag</div>
        }
        <div class="post-content">
            @foreach (var part in @Model.Post!.Parts)
            {
                @HtmlFactory.GenerateHtml(part)
            }
        </div>
    </section>
}